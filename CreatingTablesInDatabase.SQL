-- CREATE USER postgres;
--
-- CREATE DATABASE postgres;
-- GRANT ALL PRIVILEGES ON DATABASE postgres TO postgres;

CREATE TABLE IF NOT EXISTS Client
(
    id          int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    client_name varchar(60) UNIQUE NOT NULL,
    password    varchar(60)        NOT NULL

    );

CREATE TABLE IF NOT EXISTS Task
(
    id          int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title       varchar(60) NOT NULL unique,
    description varchar(210),
    priority    varchar(20),
    status      varchar(20),
    author_id   int         NOT NULL REFERENCES Client (id) ON DELETE cascade ,
    executor_id int         REFERENCES Client (id) ON DELETe cascade


    );

CREATE TABLE IF NOT EXISTS comment
(
    id           int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    text_comment varchar(210) NOT NULL,
    task_id      int          NOT NULL REFERENCES Task (id) ON DELETE CASCADE,
    author_id    int          NOT NULL REFERENCES Client (id) ON DELETE CASCADE


    );

